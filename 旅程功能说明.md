# 旅程功能说明

## 功能概述

新增的"旅程"功能允许您将多个旅行目的地归集到一个旅程组中。例如，您可以创建一个名为"2025年10月青甘大环线"的旅程，然后将这次旅行中访问的所有城市和景点都关联到这个旅程中。

## 主要特性

### 1. 旅程管理

#### 创建旅程
- 在"旅程"标签页点击右上角的 + 按钮
- 填写旅程信息：
  - 旅程名称（必填）：如"2025年10月青甘大环线"
  - 描述（可选）：对这次旅行的简短描述
  - 开始日期和结束日期
  - 封面图片（可选）：为旅程添加一张代表性的照片
- 系统会自动计算旅程天数

#### 查看旅程
- 在"旅程"标签页可以看到所有旅程列表
- 每个旅程卡片显示：
  - 旅程名称和描述
  - 封面图片（如果有）
  - 旅程天数
  - 包含的目的地数量

#### 编辑旅程
- 在旅程详情页点击右上角菜单按钮
- 选择"编辑旅程"
- 可以修改旅程的所有信息

#### 删除旅程
- 在旅程详情页点击右上角菜单按钮
- 选择"删除旅程"
- 删除旅程不会删除其中的目的地，只是解除关联

### 2. 将目的地关联到旅程

#### 方式一：创建新目的地时关联
1. 在"足迹"标签页添加新目的地
2. 在"所属旅程（可选）"部分选择要关联的旅程
3. 保存后，该目的地会自动添加到所选旅程中

#### 方式二：编辑现有目的地时关联
1. 打开目的地详情页
2. 点击右上角的编辑按钮
3. 在"所属旅程（可选）"部分选择或更改旅程
4. 保存即可

#### 方式三：在旅程详情页添加
1. 打开旅程详情页
2. 点击右上角菜单，选择"添加目的地"
3. 可以选择：
   - **创建新目的地**：填写完整的目的地信息
   - **添加现有目的地**：从已有的目的地中选择

### 3. 查看旅程详情

旅程详情页包含：
- 封面图片或渐变背景
- 旅程名称和描述
- 时间信息卡片（开始日期、结束日期、时长）
- 行程路线（按访问日期排序的目的地列表）
- 每个目的地显示序号、照片、名称、国家和访问日期

### 4. 在其他页面查看旅程信息

#### 目的地列表
- 在"足迹"标签页的列表中
- 如果目的地属于某个旅程，会显示旅程图标和名称
- 显示为紫色的行李箱图标

#### 目的地详情
- 在目的地详情页
- 如果属于某个旅程，会显示"所属旅程"卡片
- 点击可以直接跳转到旅程详情页

## 使用场景示例

### 场景 1：青甘大环线
```
旅程：2025年10月青甘大环线
时间：2025年10月1日 - 2025年10月7日
目的地：
  1. 西宁（10月1日）
  2. 青海湖（10月2日）
  3. 茶卡盐湖（10月3日）
  4. 敦煌（10月4日）
  5. 嘉峪关（10月5日）
  6. 张掖（10月6日）
  7. 兰州（10月7日）
```

### 场景 2：欧洲之旅
```
旅程：2024年夏季欧洲之旅
时间：2024年7月10日 - 2024年7月25日
目的地：
  1. 巴黎，法国（7月10-13日）
  2. 阿姆斯特丹，荷兰（7月14-16日）
  3. 柏林，德国（7月17-19日）
  4. 布拉格，捷克（7月20-22日）
  5. 维也纳，奥地利（7月23-25日）
```

## 数据模型

### TravelTrip（旅程）
- `id`: 唯一标识符
- `name`: 旅程名称
- `desc`: 旅程描述
- `startDate`: 开始日期
- `endDate`: 结束日期
- `coverPhotoData`: 封面图片数据
- `destinations`: 关联的目的地列表

### TravelDestination（目的地）
新增字段：
- `trip`: 所属的旅程（可选）

## 导航结构

应用现在包含 4 个主要标签页：
1. **地图** - 在地图上查看所有目的地
2. **足迹** - 查看所有目的地的列表
3. **旅程** - 查看和管理所有旅程（新增）
4. **我的** - 个人统计和设置

## 注意事项

1. 一个目的地只能属于一个旅程
2. 删除旅程不会删除其中的目的地
3. 旅程中的目的地按访问日期排序
4. 可以随时修改目的地所属的旅程
5. 旅程的封面图片是可选的

## 技术实现

- 使用 SwiftData 进行数据持久化
- 目的地和旅程之间使用一对多关系
- 支持双向导航（从旅程到目的地，从目的地到旅程）
- 实时更新统计信息（旅程天数、目的地数量等）

## 未来可能的增强

- 导出旅程为 PDF 或图片
- 分享整个旅程
- 旅程模板
- 预算管理
- 旅程时间线视图
- 按旅程生成旅行报告

