# 墨鱼足迹 项目总结 📋

## 项目概览

**墨鱼足迹** 是一款专注旅行与生活足迹记录的 iOS 应用，通过沉浸式地图体验帮助用户点亮每一次出发的记忆。
为你打造专属的数字旅行博物馆，让每个足迹都成为永恒回忆！
紧紧围绕“记录、分享、回忆”三个核心模块，构建完整闭环，让每一段旅程都成为值得珍藏的温暖回忆。

Keep Simple! Keep Easy!

记录 • 当时当下的轻松记录
一键轻松打卡，留住旅行中的每一个精彩瞬间

分享 • 即时分享旅行的乐趣
即时分享快捷感 + 旅程总结成就感

回忆 • 唤醒旅途的温暖感动
让记录在平凡日子里绽放温暖

开启你的墨鱼足迹之旅
让每次出发、每个瞬间都被优雅收藏。即刻了解更多，探索属于你的足迹世界。

## 核心功能 ✨

1. **地图体验** 🗺️  
   - 标准/3D/卫星视角切换  
   - 聚合与节流优化，海量足迹流畅渲染；POI 识别与反向地理编码加强  
   - 支持地图标记点选查看详情、导航/关联外部地图（Pro 优先）

2. **打卡与足迹管理** 📋  
   - 浮动菜单一键打卡，智能表单自动填充位置/时间  
   - 照片导入添加地点，照片 EXIF 提取 GPS 与拍摄时间，标签、笔记、收藏最爱全量管理  
   - 列表按时间/国家/省份/收藏筛选，已添加旅程可直接编辑

3. **旅程与回忆** 🧭  
   - 旅程卡片支持新增、编辑与快速保存，分页滚动模式每页居中显示一个卡片
   - 响应式卡片宽度设计（280-360pt），适配不同屏幕尺寸，流畅切换动画
   - 旅程抽屉优化，收起状态与底部导航栏宽度一致，展开/收起动画流畅自然
   - 详情页展示完整足迹、多图全屏查看、跳转编辑与分享  
   - 回忆泡泡动画营造沉浸感，操作后即时反馈

4. **智能搜索与推荐** 🔍  
   - 混合搜索策略提升召回/准确率，支持名称、国家/省份、标签、收藏等维度  
   - 提供搜索建议与结果预览的即时反馈

5. **徽章与成就** 🏅  
   - 国家/省份徽章自动识别与解锁，支持徽章详情全屏查看与 3D 翻转  
   - 进度卡片展示完成度，激励探索更多足迹

6. **分享与数据** 📱  
   - 生成高质量旅程分享卡片，适配主流社交比例与多版式（清单版面、九宫格拼图、扩展网格）
   - 优化地点卡片样式，改进分享版面布局与视觉效果
   - 支持在照片分享中添加地点信息，新增视频功能支持
   - 本地数据导入/导出、旅程链接系统地图

7. **统计中心** 📊  
   - 国家、城市、时间线等多维分析，卡片视图可切换与导出概览

8. **订阅权益** 💎  
   - 免费版：基础功能，最多 50 个目的地与 5 个旅程卡片  
   - Pro 版：目的地/旅程无限、完整分享版式、导入导出与地图外链等高级能力

9. **AI智能笔记** 🤖  
   - AI笔记自动生成，根据用户语言环境智能适配提示语和输出格式
   - 支持中英日韩法西等多语言AI笔记生成
   - 集成用户属性（性别、年龄段、星座）到AI上下文，生成个性化回复
   - 优化AI服务错误处理与重试机制，提升服务稳定性

10. **用户属性与个性化** 👤  
   - 支持设置性别、年龄段、星座等用户属性，丰富用户画像
   - 所有用户属性选项支持多语言本地化（中英日韩法西等）
   - 用户属性集成到AI笔记生成，根据用户画像优化回复风格
   - 统一的品牌配色系统，支持自定义App强调色与全局渐变背景

11. **多语言、主题与无障碍** 🌍  
   - 支持中英日韩法西等多语言即时切换，完整本地化支持
   - 深色/浅色/跟随系统主题，外观模式切换即时生效
   - 动态字体、VoiceOver、触觉与动效反馈全覆盖
   - Liquid Glass设计语言，地图浮动控件、路线抽屉等核心场景采用玻璃效果

## 技术架构

### 技术栈
- **SwiftUI**：原生界面与导航（iOS 18+，26+ 启用透明导航/动态效果、Liquid Glass）
- **SwiftData**：本地持久化与 @Query 列表加载
- **StoreKit 2**：订阅付费、权益校验（PurchaseManager / EntitlementManager）
- **MapKit + CoreLocation**：地图渲染、POI 识别与反向地理编码、定位权限
- **PhotosPicker**：照片选择与 EXIF 元数据提取（GPS坐标、拍摄时间）
- **DeepSeek API**：AI笔记生成服务，支持多语言适配与个性化回复
- **Combine + async/await**：异步数据流与任务管理

### 架构模式
- MVVM + 单向数据流，环境对象注入（地图、外观、订阅、用户属性）
- 视图组件化与解耦，核心组件可降级（Liquid Glass → Material，iOS 26+ → iOS 18-25）
- SwiftData @Query / @Model 管理状态，结合任务节流与缓存
- 用户属性系统（UserProfileOptions）支持键值存储与本地化显示转换
- AI服务架构（DeepSeekProvider + LanguageConfig）支持多语言适配与错误重试
- 品牌配色系统（BrandColorManager + AppColorScheme）统一管理品牌色与渐变背景
- 旅程卡片分页架构（ScrollView + LazyHStack + ScrollViewReader）实现响应式布局