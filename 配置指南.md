# Footprint 配置指南 📋

## 📖 配置概览

Footprint 支持两种配置模式：
- **免费模式**：使用免费 Apple ID，本地存储
- **完整模式**：使用付费开发者账户，支持 iCloud 同步

---

## 🆓 免费模式配置（推荐新手）

### 适用场景
- 学习和测试应用
- 个人使用
- 不需要多设备同步

### 配置步骤

#### 1. 在 Xcode 中配置项目
1. 打开 `Footprint.xcodeproj`
2. 选择项目 `Footprint`（蓝色图标）
3. 选择 `Footprint` target
4. 进入 `Signing & Capabilities` 标签页
5. 在 Team 下拉菜单中选择你的免费账号（显示为 "Personal Team"）

#### 2. 修改 Bundle Identifier（如果需要）
- 如果遇到 Bundle Identifier 冲突
- 将 `Mooyu.Footprint` 改为你的唯一标识符
- 例如：`com.yourname.Footprint`

#### 3. 运行应用
- 连接 iPhone 或使用模拟器
- 点击运行按钮 ▶️
- 应用将正常编译和运行

### 功能说明

#### ✅ 可用功能
- 添加/编辑/删除旅行目的地
- 全球位置搜索（支持国际地址）
- 地图显示所有目的地
- 创建和管理旅程
- 添加照片和笔记
- 标记喜爱的目的地
- 查看旅行统计
- 本地数据持久化

#### ⚠️ 限制功能
- iCloud 数据同步（数据仅保存在当前设备）
- 多设备数据共享
- Sign in with Apple 登录

---

## 💰 完整模式配置（付费开发者）

### 适用场景
- 需要多设备同步
- 准备发布到 App Store
- 需要完整功能

### 前提条件
- 付费 Apple Developer Account（$99/年）
- 已注册并激活开发者账户

### 配置步骤

#### 1. 在 Xcode 中配置 Team
1. 选择项目 `Footprint`
2. 选择 `Footprint` target
3. 进入 `Signing & Capabilities` 标签页
4. 在 Team 下拉菜单中选择你的付费账户
   - 应该显示类似："Your Name (Individual)" 或 "Your Name (Company)"
   - **不再是 "Personal Team"**

#### 2. 添加 Capabilities（功能权限）

##### 添加 "Sign in with Apple"
1. 点击 `+ Capability` 按钮
2. 搜索 "sign" 或 "apple"
3. 双击 "Sign in with Apple" 添加

##### 添加 "iCloud"
1. 点击 `+ Capability` 按钮
2. 搜索 "icloud"
3. 双击 "iCloud" 添加
4. 在 iCloud 卡片中勾选 ✅ **CloudKit**

#### 3. 验证配置
在 "Signing & Capabilities" 标签页中，应该看到：

```
╔════════════════════════════════╗
║ Signing                        ║
║ Team: Your Name (Individual)   ║
║ Bundle ID: com.yourname.Footprint ║
╚════════════════════════════════╝

╔════════════════════════════════╗
║ Sign in with Apple             ║
╚════════════════════════════════╝

╔════════════════════════════════╗
║ iCloud                         ║
║ ✅ CloudKit                    ║
╚════════════════════════════════╝
```

#### 4. 重新构建和测试
1. **Clean Build Folder：**
   - `Product` > `Clean Build Folder`
   - 或按 `Shift + Command + K`

2. **重新运行：**
   - 点击 ▶️ 按钮
   - 或按 `Command + R`

3. **测试登录功能：**
   - 在 iPhone 上打开应用
   - 进入"我的"标签页
   - 点击"登录 Apple ID"或设置按钮
   - 点击 "Sign in with Apple" 按钮

### 功能说明

#### ✅ 完整功能
- 所有免费模式功能
- Apple ID 登录
- iCloud 自动同步
- 多设备数据同步
- 数据永不丢失
- 推送通知（如需要）
- App Store 发布
- TestFlight 分发

---

## 🔧 故障排除

### 常见问题

#### 问题 1: 编译错误 "Cannot create provisioning profile"
**解决方案**: 
- 免费模式：确保使用 Personal Team
- 完整模式：确保使用付费开发者账户

#### 问题 2: 无法添加 Capabilities
**解决方案**:
- 确保选择了付费 Team
- 等待 Xcode 同步配置（可能需要几分钟）
- 重启 Xcode

#### 问题 3: 数据没有同步
**解决方案**:
- 检查设备是否连接到互联网
- 确认已登录 Apple ID
- 检查 iCloud 设置中是否启用了 iCloud Drive
- 等待几分钟，CloudKit 同步可能需要时间

#### 问题 4: 仍然显示 "Personal Team"
**解决**:
- 退出 Xcode
- 重新打开 Xcode
- 重新选择 Team

### 测试步骤

#### 免费模式测试
1. 运行应用
2. 添加一些旅行数据
3. 验证数据保存在本地
4. 重启应用，数据应该还在

#### 完整模式测试
1. 运行应用
2. 使用 Apple ID 登录
3. 添加一些旅行数据
4. 检查是否显示 "iCloud 已同步"
5. 在其他设备上登录相同 Apple ID
6. 验证数据是否同步

---

## 📱 设备要求

### 系统要求
- iOS 17.0 或更高版本
- iPhone 或 iPad
- 网络连接（用于位置搜索和 iCloud 同步）

### 权限要求
- 位置权限（用于地图和位置搜索）
- 照片权限（用于上传照片）
- iCloud 权限（完整模式）

---

## 🔒 数据安全

### 免费模式
- 数据仅保存在本地设备
- 卸载应用会删除所有数据
- 建议定期备份设备

### 完整模式
- 数据加密存储在用户的 iCloud 账户
- 开发者无法访问用户数据
- 支持 Apple 的隐私保护功能
- 数据永不丢失

---

## 📝 注意事项

### 免费模式
1. **数据安全**: 数据仅保存在设备上，请定期备份
2. **应用更新**: 更新应用可能导致数据丢失，请在更新前备份
3. **测试限制**: 免费账号每 7 天需要重新签名应用
4. **设备限制**: 免费账号最多只能在 3 台设备上测试

### 完整模式
1. **开发者账户**: 需要付费的 Apple Developer Account
2. **网络连接**: 需要互联网连接才能同步
3. **Apple ID**: 设备需要登录 Apple ID
4. **真机测试**: iCloud 功能建议在真机上测试

---

## 🎯 选择建议

### 选择免费模式，如果你：
- 刚开始学习 iOS 开发
- 只是想测试应用功能
- 不需要多设备同步
- 预算有限

### 选择完整模式，如果你：
- 需要多设备同步
- 准备发布到 App Store
- 需要完整功能
- 愿意投资 $99/年的开发者费用

---

## 📞 需要帮助？

如果在配置过程中遇到任何问题，请检查：

1. **Xcode 版本**: 确保使用最新版本的 Xcode
2. **系统版本**: 确保 macOS 和 iOS 版本兼容
3. **网络连接**: 确保网络连接正常
4. **Apple ID**: 确保 Apple ID 状态正常
5. **开发者账户**: 确保开发者账户状态正常

---

**现在就去 Xcode 中配置你的项目吧！** 🚀

*预计完成时间：5-10 分钟*
*难度：⭐☆☆☆☆ 非常简单*
