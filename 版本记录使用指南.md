# Footprint 版本记录使用指南 📝

## 功能概述

本版本记录系统为Footprint项目提供自动化的版本追踪功能，每次Archive创建新app时自动记录版本信息。

## 文件结构

```
Footprint/
├── 版本记录.md                    # 主版本记录文件
├── 版本记录使用指南.md             # 本使用指南
└── scripts/
    ├── version_tracker.sh         # 完整版本记录脚本
    ├── quick_version.sh           # 快速版本记录脚本
    └── xcode_build_script.sh      # Xcode构建脚本
```

## 使用方法

### 方法一：手动运行（推荐）

每次Archive后，手动运行版本记录脚本：

```bash
# 进入项目目录
cd "/Users/kevinx/Documents/Ai Project/Footprint"

# 运行完整版本记录脚本
./scripts/version_tracker.sh
```

**脚本功能：**
- ✅ 自动提取版本信息
- ✅ 创建/更新版本记录
- ✅ 打开编辑器编辑更新内容
- ✅ 可选提交到Git

### 方法二：快速记录

如果只需要快速记录版本信息：

```bash
# 运行快速版本记录
./scripts/quick_version.sh
```

**特点：**
- ⚡ 快速执行
- 📝 自动创建版本记录
- ✏️ 需要手动编辑更新内容

### 方法三：集成到Xcode（高级）

将版本记录集成到Xcode构建流程：

1. 在Xcode中打开项目
2. 选择Footprint target
3. 进入Build Phases
4. 点击"+"添加Run Script Phase
5. 添加以下脚本：

```bash
# 版本记录脚本
if [ "${CONFIGURATION}" = "Release" ]; then
    bash "${SRCROOT}/scripts/xcode_build_script.sh"
fi
```

## 版本记录格式

### 自动记录信息
- **版本号**: 从Xcode项目配置自动读取
- **构建版本**: 从Xcode项目配置自动读取
- **发布日期**: 自动生成当前日期
- **更新时间**: 自动生成当前时间

### 手动编辑内容
运行脚本后，需要手动编辑以下部分：

```markdown
#### 🎯 主要更新
- 请在此处添加主要功能更新

#### 🔧 技术改进
- 请在此处添加技术改进说明

#### 📱 用户体验
- 请在此处添加用户体验改进
```

## 版本记录示例

```markdown
### [Version 1.2.0] - 2025-01-27
**构建版本**: 2  
**发布日期**: 2025-01-27  
**更新时间**: 14:30:15  
**更新类型**: 功能更新

#### 🎯 主要更新
- 新增版本自动记录功能
- 优化地图搜索性能
- 改进用户界面设计

#### 🔧 技术改进
- 集成版本记录脚本
- 优化SwiftData查询性能
- 增强错误处理机制

#### 📱 用户体验
- 更流畅的地图交互
- 更直观的界面设计
- 更快的搜索响应
```

## 最佳实践

### 1. 版本号管理
- 使用语义化版本控制 (SemVer)
- 主版本号：重大功能更新
- 次版本号：新功能添加
- 修订号：bug修复

### 2. 记录内容
- 保持记录简洁明了
- 重点描述用户可见的变化
- 包含技术改进说明
- 记录用户体验提升

### 3. 工作流程
1. 完成功能开发
2. 在Xcode中更新版本号
3. 运行版本记录脚本
4. 编辑更新内容
5. Archive项目
6. 提交到Git仓库

## 故障排除

### 常见问题

**Q: 脚本无法运行**
```bash
# 检查脚本权限
chmod +x scripts/version_tracker.sh
```

**Q: 版本信息提取失败**
- 检查Xcode项目文件路径
- 确认项目配置正确

**Q: 版本记录格式错误**
- 检查Markdown语法
- 确保缩进正确

### 手动修复

如果自动脚本出现问题，可以手动编辑`版本记录.md`文件：

1. 复制现有版本记录格式
2. 更新版本号和日期
3. 添加更新内容
4. 保存文件

## 高级功能

### 自定义脚本

可以修改脚本以适应特定需求：

```bash
# 编辑脚本文件
nano scripts/version_tracker.sh

# 自定义版本记录格式
# 添加额外的版本信息
# 集成其他工具
```

### 集成其他工具

- 集成Git标签管理
- 连接CI/CD流程
- 自动生成发布说明
- 同步到项目管理工具

## 支持与反馈

如有问题或建议，请：
1. 检查脚本日志输出
2. 查看版本记录文件格式
3. 联系开发团队

---

*版本记录系统 v1.0 - 为Footprint项目提供自动化版本管理*
